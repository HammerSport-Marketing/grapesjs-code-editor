/*! @truenorthtechnology/grapesjs-code-editor - 0.1.4 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@truenorthtechnology/grapesjs-code-editor"]=t():e["@truenorthtechnology/grapesjs-code-editor"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeCommandFactory=void 0;var n=i(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){var e=null;return{id:"open-code",run:function(t,i){e||(e=new r.default(t)),e.showCodePanel()},stop:function(t,i){e&&e.hideCodePanel()}}};t.codeCommandFactory=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(2),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(){function e(t){n(this,e),this.editor=t,this.isShowing=!0,this.buildCodePanel(t)}return r(e,[{key:"findPanel",value:function(){var e=this.editor.Panels,t="views-container";return e.getPanel(t)||e.addPanel({id:t})}},{key:"findWithinEditor",value:function(e){return this.editor.$(e,this.editor.getEl())}},{key:"buildCodeEditor",value:function(e){var t=this.editor.CodeManager.getViewer("CodeMirror").clone();return t.set({codeName:"html"===e?"htmlmixed":"css",readOnly:!1,theme:"hopscotch",autoBeautify:!0,autoCloseTags:!0,autoCloseBrackets:!0,styleActiveLine:!0,smartIndent:!0}),t}},{key:"buildSection",value:function(e,t,i){var n=document.createElement("section");return n.innerHTML='\n      <div class="codepanel-separator">\n        <div class="codepanel-label">'+e+'</div>\n        <button class="cp-apply-'+e+'">Apply</button>\n      </div>',n.appendChild(i),this.codePanel.appendChild(n),n}},{key:"buildCodePanel",value:function(e){var t=this,i=this.findPanel();this.codePanel=document.createElement("div"),this.codePanel.classList.add("code-panel"),this.htmlCodeEditor=this.buildCodeEditor("html"),this.cssCodeEditor=this.buildCodeEditor("css");var n=document.createElement("textarea"),r=document.createElement("textarea"),o=[this.buildSection("html",this.htmlCodeEditor,n),this.buildSection("css",this.cssCodeEditor,r)];return i.set("appendContent",this.codePanel).trigger("change:appendContent"),this.htmlCodeEditor.init(n),this.cssCodeEditor.init(r),this.updateEditorContents(),this.findWithinEditor(".cp-apply-html").get(0).addEventListener("click",this.updateHtml.bind(this)),this.findWithinEditor(".cp-apply-css").get(0).addEventListener("click",this.updateCss.bind(this)),(0,s.default)(o,{direction:"vertical",sizes:[50,50],minSize:100,gutterSize:2,onDragEnd:this.refreshEditors.bind(this)}),this.editor.on("component:add",function(e){t.updateEditorContents()}),this.editor.on("component:remove",function(e){t.updateEditorContents()}),this.editor.on("component:update",function(e){t.updateEditorContents()}),this.codePanel}},{key:"showCodePanel",value:function(){this.isShowing=!0,this.updateEditorContents(),this.codePanel.style.display="block",setTimeout(this.refreshEditors.bind(this),320),this.findWithinEditor(".gjs-pn-views-container").get(0).style.width="35%",this.findWithinEditor(".gjs-cv-canvas").get(0).style.width="65%"}},{key:"hideCodePanel",value:function(){this.codePanel&&(this.codePanel.style.display="none"),this.findWithinEditor(".gjs-pn-views-container").get(0).style.width="26%",this.findWithinEditor(".gjs-cv-canvas").get(0).style.width="74%",this.isShowing=!1}},{key:"refreshEditors",value:function(){this.htmlCodeEditor.editor.refresh(),this.cssCodeEditor.editor.refresh()}},{key:"updateHtml",value:function(){var e=this.htmlCodeEditor.editor.getValue();if(e&&e!==this.previousHtmlCode){this.previousHtmlCode=e;this.editor.LayerManager.getRoot().components(e)}}},{key:"updateCss",value:function(){var e=this.cssCodeEditor.editor.getValue();e&&e!==this.previousCssCode&&(this.previousCssCode=e,this.editor.setStyle(e))}},{key:"updateEditorContents",value:function(){this.isShowing&&(this.htmlCodeEditor.setContent(this.getGrapesHtml()),this.cssCodeEditor.setContent(this.editor.getCss({avoidProtected:!0})))}},{key:"getGrapesHtml",value:function(){var e=this.editor.getConfig(),t=e.exportWrapper,i=e.wrappesIsBody,n=this.editor.LayerManager.getRoot(),r=this.editor.CodeManager.getCode(n,"html",{exportWrapper:t,wrappesIsBody:i}),o=e.jsInHtml?this.editor.getJs():"";return r+=o?"<script>"+o+"<\/script>":""}}]),e}();t.default=a},function(e,t,i){/*! Split.js - v1.3.5 */
!function(t,i){e.exports=i()}(0,function(){"use strict";var e=window,t=e.document,i="addEventListener",n="removeEventListener",r="getBoundingClientRect",o=function(){return!1},s=e.attachEvent&&!e[i],a=["","-webkit-","-moz-","-o-"].filter(function(e){var i=t.createElement("div");return i.style.cssText="width:"+e+"calc(9px)",!!i.style.length}).shift()+"calc",d=function(e){return"string"==typeof e||e instanceof String?t.querySelector(e):e};return function(l,u){function c(e,t,i){var n=_(b,t,i);Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}function h(e,t){var i=D(b,t);Object.keys(i).forEach(function(t){return e.style[t]=i[t]})}function f(e){var t=E[this.a],i=E[this.b],n=t.size+i.size;t.size=e/this.size*n,i.size=n-e/this.size*n,c(t.element,t.size,this.aGutterSize),c(i.element,i.size,this.bGutterSize)}function p(e){var t;this.dragging&&(t="touches"in e?e.touches[0][S]-this.start:e[S]-this.start,t<=E[this.a].minSize+M+this.aGutterSize?t=E[this.a].minSize+this.aGutterSize:t>=this.size-(E[this.b].minSize+M+this.bGutterSize)&&(t=this.size-(E[this.b].minSize+this.bGutterSize)),f.call(this,t),u.onDrag&&u.onDrag())}function m(){var e=E[this.a].element,t=E[this.b].element;this.size=e[r]()[b]+t[r]()[b]+this.aGutterSize+this.bGutterSize,this.start=e[r]()[C]}function v(){var t=this,i=E[t.a].element,r=E[t.b].element;t.dragging&&u.onDragEnd&&u.onDragEnd(),t.dragging=!1,e[n]("mouseup",t.stop),e[n]("touchend",t.stop),e[n]("touchcancel",t.stop),t.parent[n]("mousemove",t.move),t.parent[n]("touchmove",t.move),delete t.stop,delete t.move,i[n]("selectstart",o),i[n]("dragstart",o),r[n]("selectstart",o),r[n]("dragstart",o),i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor=""}function g(t){var n=this,r=E[n.a].element,s=E[n.b].element;!n.dragging&&u.onDragStart&&u.onDragStart(),t.preventDefault(),n.dragging=!0,n.move=p.bind(n),n.stop=v.bind(n),e[i]("mouseup",n.stop),e[i]("touchend",n.stop),e[i]("touchcancel",n.stop),n.parent[i]("mousemove",n.move),n.parent[i]("touchmove",n.move),r[i]("selectstart",o),r[i]("dragstart",o),s[i]("selectstart",o),s[i]("dragstart",o),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",n.gutter.style.cursor=O,n.parent.style.cursor=O,m.call(n)}function y(e){e.forEach(function(t,i){if(i>0){var n=H[i-1],r=E[n.a],o=E[n.b];r.size=e[i-1],o.size=t,c(r.element,r.size,n.aGutterSize),c(o.element,o.size,n.bGutterSize)}})}function z(){H.forEach(function(e){e.parent.removeChild(e.gutter),E[e.a].element.style[b]="",E[e.b].element.style[b]=""})}void 0===u&&(u={});var b,S,C,E,w=d(l[0]).parentNode,P=e.getComputedStyle(w).flexDirection,k=u.sizes||l.map(function(){return 100/l.length}),x=void 0!==u.minSize?u.minSize:100,G=Array.isArray(x)?x:l.map(function(){return x}),j=void 0!==u.gutterSize?u.gutterSize:10,M=void 0!==u.snapOffset?u.snapOffset:30,L=u.direction||"horizontal",O=u.cursor||("horizontal"===L?"ew-resize":"ns-resize"),W=u.gutter||function(e,i){var n=t.createElement("div");return n.className="gutter gutter-"+i,n},_=u.elementStyle||function(e,t,i){var n={};return"string"==typeof t||t instanceof String?n[e]=t:n[e]=s?t+"%":a+"("+t+"% - "+i+"px)",n},D=u.gutterStyle||function(e,t){return i={},i[e]=t+"px",i;var i};"horizontal"===L?(b="width","clientWidth",S="clientX",C="left","paddingLeft"):"vertical"===L&&(b="height","clientHeight",S="clientY",C="top","paddingTop");var H=[];return E=l.map(function(e,t){var n,o={element:d(e),size:k[t],minSize:G[t]};if(t>0&&(n={a:t-1,b:t,dragging:!1,isFirst:1===t,isLast:t===l.length-1,direction:L,parent:w},n.aGutterSize=j,n.bGutterSize=j,n.isFirst&&(n.aGutterSize=j/2),n.isLast&&(n.bGutterSize=j/2),"row-reverse"===P||"column-reverse"===P)){var a=n.a;n.a=n.b,n.b=a}if(!s&&t>0){var u=W(t,L);h(u,j),u[i]("mousedown",g.bind(n)),u[i]("touchstart",g.bind(n)),w.insertBefore(u,o.element),n.gutter=u}0===t||t===l.length-1?c(o.element,o.size,j/2):c(o.element,o.size,j);var f=o.element[r]()[b];return f<o.minSize&&(o.minSize=f),t>0&&H.push(n),o}),s?{setSizes:y,destroy:z}:{setSizes:y,getSizes:function(){return E.map(function(e){return e.size})},collapse:function(e){if(e===H.length){var t=H[e-1];m.call(t),s||f.call(t,t.size-t.bGutterSize)}else{var i=H[e];m.call(i),s||f.call(i,i.aGutterSize)}},destroy:z}}})}])});